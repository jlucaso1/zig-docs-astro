---
import type { HTMLAttributes } from "astro/types";

interface Props extends HTMLAttributes<"a"> {}

// Get all props that would be passed to an anchor tag
const { href, ...rest } = Astro.props;

// Function to determine if a URL is absolute
function isAbsoluteUrl(url: string) {
  return /^(?:[a-z]+:)?\/\/|^mailto:|^tel:|^#/i.test(url);
}

// Process the href
let processedHref = href;
if (href && typeof href === "string" && !isAbsoluteUrl(href)) {
  // Get base URL from environment
  const base = import.meta.env.BASE_URL || "";

  // Add base URL to relative links
  processedHref = `${base}${href.startsWith("/") ? href : `/${href}`}`;
}
---

<a href={processedHref} {...rest}>
  <slot />
</a>
